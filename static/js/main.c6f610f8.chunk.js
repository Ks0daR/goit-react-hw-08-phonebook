(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{108:function(e,t,n){},129:function(e,t,n){"use strict";n.r(t);var a,r,o,c=n(0),u=n.n(c),l=n(18),i=n.n(l),s=n(16),m=n(6),b=n(2),p=n(4),f=Object(b.b)("theme/toggleTheme"),h=Object(b.c)(!0,Object(p.a)({},f,(function(e){return!e}))),_=n(76),d=n(8),g=Object(b.b)("phoneBook/fetchContactsRequest"),E=Object(b.b)("phoneBook/fetchContactsSuccess"),O=Object(b.b)("phoneBook/fetchContactsError"),v=Object(b.b)("phoneBook/addContactRequest"),j=Object(b.b)("phoneBook/addContactSuccess"),k=Object(b.b)("phoneBook/addContactError"),y=Object(b.b)("phoneBook/removeContactRequest"),I=Object(b.b)("phoneBook/removeContactSuccess"),S=Object(b.b)("phoneBook/removeContactError"),L=Object(b.b)("phoneBook/filtered"),C=Object(b.c)([],(a={},Object(p.a)(a,E,(function(e,t){return t.payload})),Object(p.a)(a,j,(function(e,t){var n=t.payload;return[].concat(Object(_.a)(e),[n])})),Object(p.a)(a,I,(function(e,t){var n=t.payload;return e.filter((function(e){return n!==e.id}))})),a)),N=Object(b.c)("",Object(p.a)({},L.type,(function(e,t){return t.payload}))),x=Object(b.c)(!1,(r={},Object(p.a)(r,g,(function(){return!0})),Object(p.a)(r,E,(function(){return!1})),Object(p.a)(r,O,(function(){return!1})),Object(p.a)(r,v,(function(){return!0})),Object(p.a)(r,j,(function(){return!1})),Object(p.a)(r,k,(function(){return!1})),Object(p.a)(r,y,(function(){return!0})),Object(p.a)(r,I,(function(){return!1})),Object(p.a)(r,S,(function(){return!1})),r)),D=Object(b.c)({},(o={},Object(p.a)(o,O,(function(e,t){return t.payload})),Object(p.a)(o,k,(function(e,t){return t.payload})),Object(p.a)(o,S,(function(e,t){return t.payload})),o)),w=Object(d.c)({contactsBase:C,filter:N,loader:x,error:D}),A={registrationRequest:Object(b.b)("auth/registrationRequest"),registrationSuccess:Object(b.b)("auth/registrationSuccess"),registrationError:Object(b.b)("auth/registrationError"),logInRequest:Object(b.b)("auth/logInRequest"),logInSuccess:Object(b.b)("auth/logInSuccess"),logInError:Object(b.b)("auth/logInError"),logOutRequest:Object(b.b)("auth/logOutRequest"),logOutSuccess:Object(b.b)("auth/logOutSuccess"),logOutError:Object(b.b)("auth/logOutError"),getCurrentUserRequest:Object(b.b)("auth/getUserRequest"),getCurrentUserSuccess:Object(b.b)("auth/getUserSuccess"),getCurrentUserError:Object(b.b)("auth/getUserError")},B=n(13),F=n.n(B);F.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com/";var H,R,T=function(e){F.a.defaults.headers.common.Authorization="Bearer ".concat(e)},U=function(){F.a.defaults.headers.common.Authorization=""},q={registration:function(e){return function(t){t(A.registrationRequest()),console.log(e),F.a.post("/users/signup",e).then((function(e){var n=e.data;T(n.token),t(A.registrationSuccess(n))})).catch((function(e){return t(A.registrationError(e))}))}},logIn:function(e){return function(t){t(A.logInRequest()),F.a.post("/users/login",e).then((function(e){var n=e.data;T(n.token),t(A.logInSuccess(n))})).catch((function(e){return t(A.logInError(e))}))}},logOut:function(){return function(e){e(A.logOutRequest()),F.a.post("/users/logout").then((function(t){U(),e(A.logOutSuccess())})).catch((function(t){return e(A.logOutError)}))}},currentUser:function(){return function(e,t){var n=t().auth.token;console.log(t()),T(n),e(A.getCurrentUserRequest()),F.a.get("/users/current").then((function(t){var n=t.data;return e(A.getCurrentUserSuccess(n))})).catch((function(t){return e(A.getCurrentUserError(t))}))}}},V={name:"",email:""},M=Object(b.c)(V,(H={},Object(p.a)(H,A.registrationSuccess,(function(e,t){return t.payload.user})),Object(p.a)(H,A.logInSuccess,(function(e,t){return t.payload.user})),Object(p.a)(H,A.logOutSuccess,(function(e,t){t.payload;return V})),Object(p.a)(H,A.getCurrentUserSuccess,(function(e,t){return t.payload})),H)),P=Object(b.c)(null,(R={},Object(p.a)(R,A.registrationSuccess,(function(e,t){return t.payload.token})),Object(p.a)(R,A.logInSuccess,(function(e,t){return t.payload.token})),Object(p.a)(R,A.logOutSuccess,(function(e,t){t.payload;return null})),Object(p.a)(R,A.getCurrentUserSuccess,(function(e,t){return t.payload.token})),R)),K=Object(d.c)({user:M,token:P}),Q=function(e){return e.auth.token},z=function(e){return e.auth.user.name},J=n(50),G=n(62),Y={key:"auth",storage:n.n(G).a,whitelist:["token"]},Z=Object(b.a)({reducer:{theme:h,contacts:w,auth:Object(J.a)(Y,K)}}),W=Object(J.b)(Z),X=(n(108),n(19)),$=n(20),ee=n(22),te=n(23),ne=n(145),ae=n(147),re=n(34),oe=n.n(re),ce={onLogOut:q.logOut,avatar:"https://previews.123rf.com/images/nexusby/nexusby1810/nexusby181000286/111362910-default-avatar-placeholder-profile-icon-male.jpg"},ue=Object(m.b)((function(e){return{userName:z(e)}}),ce)((function(e){var t=e.avatar,n=e.userName,a=e.onLogOut;return u.a.createElement(u.a.Fragment,null,u.a.createElement(s.b,{className:oe.a.button,to:"/"},u.a.createElement(ne.a,{variant:"contained",color:"primary"},"Home")),u.a.createElement(ae.a,{className:oe.a.avatar,alt:n,src:t}),u.a.createElement("h4",{className:oe.a.name},"Welcome, ",u.a.createElement("br",null)," ",n),u.a.createElement(s.b,{className:oe.a.button,to:"/login"},u.a.createElement(ne.a,{className:oe.a.button,variant:"contained",color:"primary",onClick:a},"Log Out")))})),le=n(48),ie=n.n(le),se=function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement(s.b,{className:ie.a.link,to:"/register"},u.a.createElement(ne.a,{variant:"contained",color:"primary",disableElevation:!0},"Registration")),u.a.createElement(s.b,{className:ie.a.link,to:"/login"},u.a.createElement(ne.a,{variant:"contained",color:"secondary",disableElevation:!0},"Log In")))},me={onToggle:f},be=Object(m.b)(null,me)((function(e){return u.a.createElement("div",null,u.a.createElement(ne.a,{variant:"outlined",color:"primary",onClick:e},"Primary"))})),pe=function(e){return e.theme},fe=n(146),he=n(35),_e=n.n(he),de=n(67),ge=n.n(de),Ee=Object(m.b)((function(e){return{theme:pe(e),isAutorisated:Q(e)}}))((function(e){var t=e.theme,n=e.isAutorisated;return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:t?_e.a.Header:_e.a.HeaderDark},u.a.createElement("div",null,u.a.createElement(fe.a,{in:!0,appear:!0,timeout:500,classNames:ge.a,unmountOnExit:!0},u.a.createElement("h1",{className:t?_e.a.Title:_e.a.TitleDark},"Phone Book"))),u.a.createElement("div",{className:_e.a.Navigation},n?u.a.createElement(ue,null):u.a.createElement(se,null))),u.a.createElement(be,null))})),Oe=n(49),ve=n.n(Oe),je=Object(m.b)((function(e){return{theme:pe(e)}}))((function(e){var t=e.children,n=e.theme;return u.a.createElement("div",{className:n?ve.a.Layout:ve.a.LayoutDark},u.a.createElement(Ee,null),t)})),ke=n(68),ye=n.n(ke),Ie=n(69),Se=n.n(Ie),Le=function(e){Object(te.a)(n,e);var t=Object(ee.a)(n);function n(){return Object(X.a)(this,n),t.apply(this,arguments)}return Object($.a)(n,[{key:"render",value:function(){return u.a.createElement(ye.a,{className:Se.a.Loader,type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3})}}]),n}(c.Component),Ce=n(27),Ne=n(43),xe=Object(m.b)((function(e){return{isAutentificated:Q(e)}}))((function(e){var t=e.component,n=e.isAutentificated,a=Object(Ne.a)(e,["component","isAutentificated"]);return n?u.a.createElement(t,a):u.a.createElement(Ce.a,{to:"/login"})})),De=Object(m.b)((function(e){return{isAutentificated:Q(e)}}))((function(e){var t=e.component,n=e.isAutentificated,a=Object(Ne.a)(e,["component","isAutentificated"]);return u.a.createElement(Ce.b,Object.assign({},a,{render:function(e){return n&&a.restricted?u.a.createElement(Ce.a,{to:"/"}):u.a.createElement(t,e)}}))})),we=n(17),Ae=function(e){return e.contacts.loader},Be=function(e){return e.contacts.error},Fe=function(e){return e.contacts.contactsBase},He=function(e){return e.contacts.filter},Re=Object(we.a)([Fe,He],(function(e,t){return e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))})),Te=n(70),Ue=n.n(Te),qe=function(){return u.a.createElement("div",{className:Ue.a.error},u.a.createElement("h4",null,"Contact already exist"))},Ve=n(28),Me=n.n(Ve),Pe=n(71),Ke=n.n(Pe),Qe=function(e){Object(te.a)(n,e);var t=Object(ee.a)(n);function n(){var e;Object(X.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={name:"",number:"",error:!1},e.getInputValue=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(p.a)({},a,r))},e.hendleSubmit=function(t){t.preventDefault(),e.checkedDoubleInput(e.state.name)?e.setState({error:!0}):(e.props.getInfo(e.state.name,e.state.number),e.setState({name:"",number:"",error:!1}))},e.checkedDoubleInput=function(t){return e.props.contacts.some((function(e){return e.name===t}))},e.changeValue=function(){e.setState({error:!1})},e}return Object($.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.number,a=e.error,r=this.props.theme;return u.a.createElement(u.a.Fragment,null,u.a.createElement(fe.a,{in:a,timeout:500,classNames:Ke.a,onEntered:this.changeValue,unmountOnExit:!0},u.a.createElement(qe,null)),u.a.createElement("form",{className:Me.a.Form,onSubmit:this.hendleSubmit},u.a.createElement("label",null,u.a.createElement("h3",{className:r?Me.a.Title:Me.a.TitleDark},"Name:"),u.a.createElement("input",{value:t,placeholder:"Enter name...",name:"name",onChange:this.getInputValue}),u.a.createElement("h3",{className:r?Me.a.title:Me.a.TitleDark},"Phone number:"),u.a.createElement("input",{value:n,name:"number",onChange:this.getInputValue,placeholder:"Enter phone..."}),u.a.createElement("br",null),u.a.createElement("button",{className:r?Me.a.Submit:Me.a.SubmitDark,type:"submit"},"Add contact"),u.a.createElement("br",null))))}}]),n}(c.Component),ze={getInfo:function(e,t){return function(n){n(v()),F.a.post("/contacts",{name:e,number:t}).then((function(e){var t=e.data;return n(j(t))})).catch((function(e){return n(k(e))}))}}},Je=Object(m.b)((function(e){return{theme:pe(e),contacts:Fe(e)}}),ze)(Qe),Ge=n(38),Ye=n.n(Ge);var Ze=function(e){var t=e.id,n=e.name,a=e.number,r=e.theme,o=e.onRemove;return u.a.createElement("li",{className:r?Ye.a.ListElement:Ye.a.ListElementDark},n," ",a,u.a.createElement("button",{type:"button",className:r?Ye.a.Button:Ye.a.ButtonDark,onClick:function(){return o(t)}},"Delete"))},We=n(148),Xe=n(44),$e=n.n(Xe),et=n(72),tt=n.n(et),nt=Object(m.b)((function(e){return{theme:pe(e),elements:Re(e)}}),(function(e){return{onRemove:function(t,n){var a;n<2&&e(L("")),e((a=t,function(e){e(y()),F.a.delete("/contacts/".concat(a)).then((function(){return e(I(a))})).catch((function(t){return e(S(t))}))}))}}}))((function(e){var t=e.elements,n=e.theme,a=e.onRemove;return u.a.createElement(u.a.Fragment,null,u.a.createElement("h2",{className:n?$e.a.Title:$e.a.TitleDark},"Contacts"),u.a.createElement(We.a,{component:"ul",className:$e.a.list},t.length>0?t.map((function(e){var r=e.id,o=e.name,c=e.number;return u.a.createElement(fe.a,{key:r,timeout:250,classNames:tt.a},u.a.createElement(Ze,{id:r,name:o,number:c,onRemove:function(){return a(r,t.length)},theme:n}))})):null))})),at=n(73),rt=n.n(at),ot=n(74),ct=n.n(ot);var ut={onSearchQuery:L},lt=Object(m.b)((function(e){return{filterValue:He(e),contacts:Fe(e)}}),ut)((function(e){var t=e.filterValue,n=e.contacts,a=e.onSearchQuery;return 1===n.length&&a(),u.a.createElement(fe.a,{in:n.length>1,timeout:250,classNames:ct.a,unmountOnExit:!0},u.a.createElement("label",{className:rt.a.search},u.a.createElement("input",{value:t,onChange:function(e){return a(e.target.value)}})))})),it=function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement(Je,null),u.a.createElement(lt,null),u.a.createElement(nt,null))},st=n(31),mt=n.n(st),bt=function(e){Object(te.a)(n,e);var t=Object(ee.a)(n);function n(){var e;Object(X.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={name:"",email:"",password:""},e.handleChangeInputValue=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(p.a)({},a,r))},e.handleSubmit=function(t){t.preventDefault(),e.props.onRegister(e.state),e.setState({name:"",email:"",password:""})},e}return Object($.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.name,a=e.password;return u.a.createElement("form",{onSubmit:this.handleSubmit},u.a.createElement("label",{className:mt.a.LabelInput},"Enter user login:",u.a.createElement("input",{className:mt.a.LabelInput,placeholder:"login...",value:n,name:"name",onChange:this.handleChangeInputValue})),u.a.createElement("label",{className:mt.a.LabelInput},"Enter user E-mail:",u.a.createElement("input",{className:mt.a.LabelInput,placeholder:"E-mail...",value:t,name:"email",onChange:this.handleChangeInputValue})),u.a.createElement("label",{className:mt.a.LabelInput},"Enter user password:",u.a.createElement("input",{type:"password",className:mt.a.LabelInput,placeholder:"password...",name:"password",value:a,onChange:this.handleChangeInputValue})),u.a.createElement("button",{type:"submit"},"Register"))}}]),n}(c.Component),pt=Object(m.b)(null,{onRegister:q.registration})(bt),ft=function(){return u.a.createElement(pt,null)},ht=n(39),_t=n.n(ht),dt=function(e){Object(te.a)(n,e);var t=Object(ee.a)(n);function n(){var e;Object(X.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleChangeInputValue=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(p.a)({},a,r))},e.handleSubmit=function(t){t.preventDefault(),e.props.onLogIn(e.state),e.setState({email:"",password:""})},e}return Object($.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password;return u.a.createElement(u.a.Fragment,null,u.a.createElement("form",{onSubmit:this.handleSubmit},u.a.createElement("label",{className:_t.a.LabelInput},"Enter user E-mail:",u.a.createElement("input",{className:_t.a.LabelInput,placeholder:"E-mail...",value:t,name:"email",onChange:this.handleChangeInputValue})),u.a.createElement("label",{className:_t.a.LabelInput},"Enter user password:",u.a.createElement("input",{type:"password",className:_t.a.LabelInput,placeholder:"password...",name:"password",value:n,onChange:this.handleChangeInputValue})),u.a.createElement("button",{type:"submit"},"Log In")))}}]),n}(c.Component),gt=Object(m.b)(null,{onLogIn:q.logIn})(dt),Et=function(){return u.a.createElement(gt,null)},Ot=function(e){Object(te.a)(n,e);var t=Object(ee.a)(n);function n(){return Object(X.a)(this,n),t.apply(this,arguments)}return Object($.a)(n,[{key:"componentDidMount",value:function(){this.props.autorisated&&this.props.getCurrentUser()}},{key:"render",value:function(){Object.keys(this.props.error).length;return u.a.createElement(je,null,this.props.loader&&u.a.createElement(Le,null),u.a.createElement(Ce.d,null,u.a.createElement(xe,{exact:!0,path:"/",component:it}),u.a.createElement(De,{exact:!0,path:"/register",component:ft,restricted:!0}),u.a.createElement(De,{exact:!0,path:"/login",component:Et,restricted:!0}),u.a.createElement(Ce.a,{to:"/"})))}}]),n}(c.Component),vt={getContacts:function(){return function(e){e(g()),F.a.get("/contacts").then((function(t){var n=t.data;return e(E(n))})).catch((function(t){return e(O(t))}))}},getCurrentUser:q.currentUser},jt=Object(m.b)((function(e){return{loader:Ae(e),error:Be(e),autorisated:Q(e)}}),vt)(Ot),kt=n(75);i.a.render(u.a.createElement(m.a,{store:Z},u.a.createElement(kt.a,{loading:null,persistor:W},u.a.createElement(s.a,null,u.a.createElement(jt,null)))),document.getElementById("root"))},28:function(e,t,n){e.exports={Form:"InputForm_Form__1uK_L",Submit:"InputForm_Submit__3Vtae",SubmitDark:"InputForm_SubmitDark__3ZLOu InputForm_Submit__3Vtae",Title:"InputForm_Title__29isw",TitleDark:"InputForm_TitleDark__1I1Pn"}},31:function(e,t,n){e.exports={LabelInput:"RegistrationForm_LabelInput__1OTdF",input:"RegistrationForm_input__3ZlAQ"}},34:function(e,t,n){e.exports={menu:"UserMenu_menu__3ot1Q",name:"UserMenu_name__2jiWt",button:"UserMenu_button__2daRv",avatar:"UserMenu_avatar__2C818"}},35:function(e,t,n){e.exports={Header:"Header_Header__3rLHK",HeaderDark:"Header_HeaderDark__Ji2Hn Header_Header__3rLHK",Title:"Header_Title__2Q0Gz",TitleDark:"Header_TitleDark__f5g6h Header_Header__3rLHK",Navigation:"Header_Navigation__3xgYl",NaviLink:"Header_NaviLink__35ofF",Button:"Header_Button__36hmx",ButtonDark:"Header_ButtonDark__Nx3K8 Header_Button__36hmx",TextDark:"Header_TextDark__1SyOZ"}},38:function(e,t,n){e.exports={ListElement:"ContactIlstItem_ListElement__1BH5a",ListElementDark:"ContactIlstItem_ListElementDark__3soNA ContactIlstItem_ListElement__1BH5a",Button:"ContactIlstItem_Button__1Gfdp",ButtonDark:"ContactIlstItem_ButtonDark__3iFQF ContactIlstItem_Button__1Gfdp"}},39:function(e,t,n){e.exports={LabelInput:"LogInForm_LabelInput__3Lfvk",input:"LogInForm_input__uXfkl"}},44:function(e,t,n){e.exports={list:"Contacts_list__3nPUw",Title:"Contacts_Title__2_yLi",TitleDark:"Contacts_TitleDark__3BI8j Contacts_Title__2_yLi"}},48:function(e,t,n){e.exports={link:"Autorisation_link__1rTv7"}},49:function(e,t,n){e.exports={Layout:"Layout_Layout__1Sw6Y",LayoutDark:"Layout_LayoutDark__3MINn Layout_Layout__1Sw6Y"}},67:function(e,t,n){e.exports={appear:"animateStyles_appear__UkAbm",appearActive:"animateStyles_appearActive__k-vhU"}},69:function(e,t,n){e.exports={Loader:"Loader_Loader__3bNi2"}},70:function(e,t,n){e.exports={error:"Error_error__1wiJM"}},71:function(e,t,n){e.exports={enter:"animatedStyles_enter__kRu1F",enterActive:"animatedStyles_enterActive__fwcvx",exit:"animatedStyles_exit__1ENL6",exitActive:"animatedStyles_exitActive__3P73f"}},72:function(e,t,n){e.exports={enter:"animatedStyles_enter__2kPtD",enterActive:"animatedStyles_enterActive__10bzL",exit:"animatedStyles_exit__3uU95",exitActive:"animatedStyles_exitActive__2r3us"}},73:function(e,t,n){e.exports={search:"FilterForm_search__1b1oa"}},74:function(e,t,n){e.exports={enter:"animatedStyles_enter__apMqr",enterActive:"animatedStyles_enterActive__18TML",exit:"animatedStyles_exit__3nKmH",exitActive:"animatedStyles_exitActive__2dSgp"}},80:function(e,t,n){e.exports=n(129)}},[[80,1,2]]]);
//# sourceMappingURL=main.c6f610f8.chunk.js.map